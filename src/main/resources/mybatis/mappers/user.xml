<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">

	<!-- 로그인 user 정보 가져오기 (id password) -->
	<select id="selectOneByIdPw" parameterType="com.javaex.vo.UserVO" resultType="com.javaex.vo.UserVO">
		<![CDATA[
			select user_id as userId,
		   		   user_name as userName,
		   		   login_id as loginId,
		   		   role
			from users
			where login_id = #{loginId}
			and password = #{password}
		]]>
	</select>

	<!-- 회원의 담당 트레이너 조회 (users.assigned_trainer_id 기반) -->
	<select id="selectTrainerByMemberId" parameterType="int" resultType="map">
		SELECT
		t.user_id AS trainerId,
		t.user_name AS trainerName
		FROM users m
		JOIN users t ON t.user_id = m.assigned_trainer_id
		WHERE m.user_id = #{memberId}
		LIMIT 1
	</select>

</mapper>